<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vanced Chatbot - Code Generator</title>
    <!-- Kh√¥ng implement ho·∫∑c s·ª≠a v√†o file css. H√£y s·ª≠a v√†o file scss t∆∞∆°ng ·ª©ng, sau ƒë√≥ t√¥i s·∫Ω t·ª± compile scss sang css -->
    <link rel="stylesheet" href="./Styles/style.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ü§ñ Vanced Chatbot Generator</h1>
        <p>T·∫°o m√£ nh√∫ng chatbot cho website c·ªßa b·∫°n trong v√†i ph√∫t</p>
      </div>

      <div class="main-content">
        <!-- Configuration Panel -->
        <div class="config-panel">
          <div class="section">
            <h3>‚öôÔ∏è C·∫•u h√¨nh c∆° b·∫£n</h3>

            <div class="form-group">
              <label for="chatbotName">T√™n Chatbot / C√¥ng ty</label>
              <input
                type="text"
                id="chatbotName"
                placeholder="VD: Vanced Agency"
                value="Vanced Agency"
              />
            </div>

            <div class="form-group">
              <label for="workersUrl">Workers URL</label>
              <input
                type="url"
                id="workersUrl"
                placeholder="https://your-worker.your-subdomain.workers.dev"
              />
            </div>

            <div class="form-group">
              <label for="welcomeMessage">Tin nh·∫Øn ch√†o m·ª´ng</label>
              <input
                type="text"
                id="welcomeMessage"
                placeholder="Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?"
                value="Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?"
              />
            </div>
          </div>

          <div class="section">
            <h3>üéØ Ch·∫ø ƒë·ªô ho·∫°t ƒë·ªông</h3>
            <div class="mode-selector">
              <div class="mode-option active" data-mode="info">
                <h4>üí¨ Info Mode</h4>
                <p>T∆∞ v·∫•n th√¥ng tin, FAQ</p>
              </div>
              <div class="mode-option" data-mode="phone">
                <h4>üìû Phone Collection</h4>
                <p>Thu th·∫≠p s·ªë ƒëi·ªán tho·∫°i</p>
              </div>
            </div>
          </div>

          <div class="section">
            <h3>üé® Giao di·ªán</h3>
            <div class="theme-grid">
              <div
                class="theme-option theme-modern-blue active"
                data-theme="modern-blue"
              >
                <div class="theme-preview"></div>
                <span>Modern Blue</span>
              </div>
              <div
                class="theme-option theme-corporate-gray"
                data-theme="corporate-gray"
              >
                <div class="theme-preview"></div>
                <span>Corporate Gray</span>
              </div>
              <div
                class="theme-option theme-friendly-green"
                data-theme="friendly-green"
              >
                <div class="theme-preview"></div>
                <span>Friendly Green</span>
              </div>
              <div class="theme-option theme-custom" data-theme="custom">
                <div class="theme-preview"></div>
                <span>Custom Orange</span>
              </div>
            </div>
          </div>

          <div class="section">
            <h3>üìç V·ªã tr√≠ hi·ªÉn th·ªã</h3>
            <div class="form-group">
              <select id="position">
                <option value="bottom-right">G√≥c d∆∞·ªõi ph·∫£i</option>
                <option value="bottom-left">G√≥c d∆∞·ªõi tr√°i</option>
                <option value="top-right">G√≥c tr√™n ph·∫£i</option>
                <option value="top-left">G√≥c tr√™n tr√°i</option>
              </select>
            </div>
          </div>

          <button class="generate-btn" onclick="generateCode()">
            üöÄ T·∫°o m√£ nh√∫ng
          </button>
        </div>

        <!-- Preview Panel -->
        <div class="preview-panel">
          <div class="section">
            <h3>üëÄ Xem tr∆∞·ªõc</h3>
            <div class="preview-chatbot">
              <h4>Chatbot s·∫Ω hi·ªÉn th·ªã nh∆∞ th·∫ø n√†y:</h4>
              <div class="chat-widget-preview">
                <div class="chat-header-preview" id="previewHeader">
                  Vanced Agency
                </div>
                <div class="chat-body-preview">
                  Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?
                </div>
                <div class="chat-input-preview">
                  <input
                    type="text"
                    class="input-preview"
                    placeholder="Nh·∫≠p tin nh·∫Øn..."
                    readonly
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="output-section" id="outputSection" style="display: none">
            <h4>üìã M√£ nh√∫ng cho website</h4>
            <p style="color: #94a3b8; margin-bottom: 15px">
              Copy v√† paste 3 ƒëo·∫°n code sau v√†o website c·ªßa b·∫°n:
            </p>

            <div class="code-block">
              <button class="copy-btn" onclick="copyCode('config')">
                Copy
              </button>
              <pre id="configCode"><!-- M√£ s·∫Ω ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông --></pre>
            </div>

            <div class="code-block">
              <button class="copy-btn" onclick="copyCode('css')">Copy</button>
              <pre id="cssCode"><!-- M√£ s·∫Ω ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông --></pre>
            </div>

            <div class="code-block">
              <button class="copy-btn" onclick="copyCode('main')">Copy</button>
              <pre id="mainCode"><!-- M√£ s·∫Ω ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông --></pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Configuration state
      let config = {
        chatbotName: "Vanced Agency",
        workersUrl: "",
        welcomeMessage: "Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?",
        mode: "info",
        theme: "modern-blue",
        position: "bottom-right",
      };

      // Theme colors for preview
      const themeColors = {
        "modern-blue": "#3b82f6",
        "corporate-gray": "#6b7280",
        "friendly-green": "#10b981",
        custom: "#f59e0b",
      };

      // Event listeners
      document.addEventListener("DOMContentLoaded", function () {
        setupEventListeners();
        updatePreview();
      });

      function setupEventListeners() {
        // Input changes
        document
          .getElementById("chatbotName")
          .addEventListener("input", (e) => {
            config.chatbotName = e.target.value;
            updatePreview();
          });

        document.getElementById("workersUrl").addEventListener("input", (e) => {
          config.workersUrl = e.target.value;
        });

        document
          .getElementById("welcomeMessage")
          .addEventListener("input", (e) => {
            config.welcomeMessage = e.target.value;
            updatePreview();
          });

        document.getElementById("position").addEventListener("change", (e) => {
          config.position = e.target.value;
        });

        // Mode selection
        document.querySelectorAll(".mode-option").forEach((option) => {
          option.addEventListener("click", () => {
            document
              .querySelectorAll(".mode-option")
              .forEach((o) => o.classList.remove("active"));
            option.classList.add("active");
            config.mode = option.dataset.mode;
          });
        });

        // Theme selection
        document.querySelectorAll(".theme-option").forEach((option) => {
          option.addEventListener("click", () => {
            document
              .querySelectorAll(".theme-option")
              .forEach((o) => o.classList.remove("active"));
            option.classList.add("active");
            config.theme = option.dataset.theme;
            updatePreview();
          });
        });
      }

      function updatePreview() {
        // Update header
        document.getElementById("previewHeader").textContent =
          config.chatbotName;
        document.getElementById("previewHeader").style.background =
          themeColors[config.theme];

        // Update welcome message
        document.querySelector(".chat-body-preview").textContent =
          config.welcomeMessage;
      }

      function generateCode() {
        if (!config.workersUrl) {
          alert("Vui l√≤ng nh·∫≠p Workers URL!");
          return;
        }

        // Generate configuration code
        const configCode =
          `<!-- 1. Configuration Object -->
<script>
  window.VancedChatbotConfig = {
    workersUrl: "${config.workersUrl}",
    chatbotName: "${config.chatbotName}",
    chatMode: "${config.mode}",
    theme: "${config.theme}",
    position: "${config.position}",
    welcomeMessage: "${config.welcomeMessage}"
  };
<` + `/script>`;

        // Generate CSS loader code
        const cssCode =
          `<!-- 2. CSS Theme Loader -->
<script>
  (function() {
    const theme = window.VancedChatbotConfig.theme || 'modern-blue';
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = \`https://cdn.vanced.media/chatbot-mini/style/\${theme}.css\`;
    document.head.appendChild(link);
  })();
<` + `/script>`;

        // Generate main CDN code
        const mainCode =
          `<!-- 3. Main CDN Script -->
<script src="https://cdn.vanced.media/chatbot-mini/scripts/newest/generator.js"><` +
          `/script>`;

        // Update code blocks
        document.getElementById("configCode").textContent = configCode;
        document.getElementById("cssCode").textContent = cssCode;
        document.getElementById("mainCode").textContent = mainCode;

        // Show output section
        document.getElementById("outputSection").style.display = "block";
        document
          .getElementById("outputSection")
          .scrollIntoView({ behavior: "smooth" });
      }

      function copyCode(type) {
        let code = "";
        switch (type) {
          case "config":
            code = document.getElementById("configCode").textContent;
            break;
          case "css":
            code = document.getElementById("cssCode").textContent;
            break;
          case "main":
            code = document.getElementById("mainCode").textContent;
            break;
        }

        navigator.clipboard
          .writeText(code)
          .then(() => {
            // Visual feedback
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = "Copied!";
            btn.style.background = "#10b981";

            setTimeout(() => {
              btn.textContent = originalText;
              btn.style.background = "#4f46e5";
            }, 2000);
          })
          .catch((err) => {
            console.error("Failed to copy: ", err);
            alert("Kh√¥ng th·ªÉ copy t·ª± ƒë·ªông. Vui l√≤ng copy th·ªß c√¥ng.");
          });
      }
    </script>
  </body>
</html>
